<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Roulette Input Pad</title>
<style>
  :root {
    --cell: min(5vw, 64px);
    --gap: 6px;
    --radius: 10px;
    --bg: #0f1222;
    --panel: #171a2e;
  }

  * { box-sizing: border-box; }
  body {
    margin: 0; padding: 24px;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    background: var(--bg); color: #e9ecf1;
    display: grid; place-items: start center; gap: 18px;
  }

  .board {
    display: grid;
    grid-template-columns: var(--cell) repeat(12, var(--cell));
    grid-template-rows: repeat(3, var(--cell));
    gap: var(--gap);
    background: #0b0d1a;
    padding: var(--gap);
    border-radius: 16px;
    box-shadow: 0 12px 30px rgba(0,0,0,.35), inset 0 0 0 1px rgba(255,255,255,.06);
  }

  button.num {
    border: none;
    color: #fff;
    font-weight: 700;
    font-size: 10px;
    border-radius: 8px;
    display: grid;
    place-items: center;
    cursor: pointer;
    transition: transform .05s ease, filter .15s ease, box-shadow .15s ease;
    user-select: none;
    outline: none;
  }
  button.num:active { transform: translateY(1px) scale(.99); }

  /* Colors */
  .red   { background: #e14b3b; }
  .black { background: #2a2f39; }
  .green { background: #1f9d55; }

  .num.red:hover   { filter: brightness(1.08); }
  .num.black:hover { filter: brightness(1.16); }
  .num.green:hover { filter: brightness(1.08); }

  /* 0 spans all 3 rows */
  .zero { grid-row: 1 / 4; grid-column: 1; font-size: 24px; }

  .panel {
    width: calc(var(--cell) * 13 + var(--gap) * 12 + var(--gap) * 2);
    max-width: 100%;
    background: var(--panel);
    border-radius: 14px;
    padding: 14px;
    box-shadow: 0 10px 24px rgba(0,0,0,.28), inset 0 0 0 1px rgba(255,255,255,.06);
  }

  .row {
    display: flex; gap: 10px; align-items: center; flex-wrap: wrap;
  }

  textarea {
    width: 100%;
    height: 90px;
    resize: vertical;
    border: 1px solid rgba(255,255,255,.12);
    background: #0f1324;
    color: #f3f6fb;
    border-radius: 10px;
    padding: 10px 12px;
    line-height: 1.35;
    font-size: 14px;
    outline: none;
  }

  .btn {
    border: none; cursor: pointer;
    background: #2d6df6; color: white;
    padding: 10px 14px; border-radius: 10px;
    font-weight: 600; transition: filter .15s;
  }
  .btn.secondary { background: #2a2f39; }
  .btn:hover { filter: brightness(1.08); }
  .hint { opacity: .8; font-size: 12px; }

  /* === ADDED === */
    .grid4 {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 6px;
    margin-top: 8px;
    }
    .grid4 .cell {
    background: #0f1324;
    border: 1px solid rgba(255,255,255,.12);
    border-radius: 8px;
    padding: 8px 10px;
    text-align: center;
    font-weight: 600;
    }

    .grid3x3 {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 8px;
    margin-top: 12px;
    }
    .grid3x3 .box {
    background: #1a2038;
    border: 1px solid rgba(255,255,255,.12);
    border-radius: 10px;
    padding: 14px 10px;
    text-align: center;
    font-size: 18px;
    font-weight: 800;
    }
    .grid3x3 .box.win { outline: 2px solid #2d6df6; }

    /* Make panels stack nicely */
    .panel .section-title { display:block; margin: 8px 0 6px; font-weight:700; }


</style>
</head>
<body>

  <!-- Roulette-style grid -->
  <div class="board" id="board"></div>

  <!-- Output & controls -->
  <div class="panel">
    <div class="row" style="justify-content: space-between; margin-bottom:10px">
      <strong>Selections</strong>
      <span class="hint">Tip: click numbers to add • Edit the list directly • Press Enter to add a line break</span>
    </div>
    <textarea id="output" placeholder="Numbers will appear here as 30, 15, 9, 5, 0 ..."></textarea>
    <div class="row" style="margin-top:10px">
      <button class="btn" id="undoBtn" title="Remove last number">Undo</button>
      <button class="btn secondary" id="clearBtn" title="Clear all">Clear</button>
      <button class="btn secondary" id="copyBtn" title="Copy to clipboard">Copy</button>
      <button class="btn" id="calcBtn" title="Calculate payouts">Calculate</button>

    </div>

    <div class="section-title">Inputs (grouped by 4)</div>
    <div id="inputGrid" class="grid4"></div>
    <div class="section-title">Payouts (Row × Dozen)</div>
    <div id="payoutGrid" class="grid3x3" aria-label="Row × Dozen payouts"></div>
  </div>

<script>
/* ------- Build the board ------- */
const board = document.getElementById('board');
const output = document.getElementById('output');

const redSet = new Set([1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36]);
const blackSet = new Set(
  Array.from({length:36}, (_,i)=>i+1).filter(n => !redSet.has(n))
);

/* Layout order (European table like the image):
   Three rows, 12 columns each. Leftmost "0" spans all rows. */
const rows = [
  [3,6,9,12,15,18,21,24,27,30,33,36],
  [2,5,8,11,14,17,20,23,26,29,32,35],
  [1,4,7,10,13,16,19,22,25,28,31,34],
];

// Add the 0 first
const zeroBtn = makeButton(0, 'green', ['num','green','zero']);
board.appendChild(zeroBtn);

// Fill rows
rows.forEach((row, rIndex) => {
  row.forEach((n, cIndex) => {
    const color = redSet.has(n) ? 'red' : 'black';
    const btn = makeButton(n, color, ['num', color]);
    // grid position: +1 column because column 1 is the zero cell
    btn.style.gridRow = (rIndex + 1);
    btn.style.gridColumn = (cIndex + 2);
    board.appendChild(btn);
  });
});

function makeButton(n, color, classes) {
  const b = document.createElement('button');
  b.textContent = n;
  b.className = classes.join(' ');
  b.dataset.value = String(n);
  b.addEventListener('click', () => addNumber(n));
  b.setAttribute('aria-label', `Add ${n}`);
  return b;
}

/* ------- Output helpers ------- */
function parseList(text) {
  // Accept commas, spaces, and newlines; keep order; ignore empties
  return text
    .split(/[\s,]+/)
    .map(s => s.trim())
    .filter(s => s.length > 0);
}

function formatList(arr) {
  return arr.join(', ');
}

function getList() {
  return parseList(output.value);
}

function setList(arr) {
  output.value = formatList(arr);
}

function addNumber(n) {
  const list = getList();
  list.push(String(n));
  setList(list);
}

/* Buttons */
document.getElementById('undoBtn').addEventListener('click', () => {
  const list = getList();
  list.pop();
  setList(list);
});

document.getElementById('clearBtn').addEventListener('click', () => {
  output.value = '';
  output.focus();
});

document.getElementById('copyBtn').addEventListener('click', async () => {
  try {
    await navigator.clipboard.writeText(output.value);
    flash('Copied!');
  } catch {
    flash('Copy failed');
  }
});

/* Small visual feedback */
function flash(msg) {
  const el = document.createElement('div');
  el.textContent = msg;
  el.style.position = 'fixed';
  el.style.bottom = '18px';
  el.style.right = '18px';
  el.style.padding = '10px 12px';
  el.style.background = '#2d6df6';
  el.style.color = 'white';
  el.style.borderRadius = '10px';
  el.style.fontWeight = '700';
  el.style.boxShadow = '0 8px 18px rgba(0,0,0,.25)';
  document.body.appendChild(el);
  setTimeout(() => el.remove(), 900);
}

/* === ADDED: payout calculation === */
const STAKE = 20;           // $20 per bet as requested
const SINGLE_WIN = 3 * STAKE - 2 * STAKE;   // 2:1 pays back $60 including stake
const DOUBLE_WIN = 6 * STAKE - 2 * STAKE; // both bets win → $120 including stake

// Build sets for quick lookup
const rowSets = rows.map(arr => new Set(arr));
const dozenSets = [
  new Set(Array.from({length:12}, (_,i)=> i+1)),        // 1–12
  new Set(Array.from({length:12}, (_,i)=> i+13)),       // 13–24
  new Set(Array.from({length:12}, (_,i)=> i+25)),       // 25–36
];

// Utility to render input numbers grouped 4-per-row
function renderInputGrid(nums) {
  const wrap = document.getElementById('inputGrid');
  wrap.innerHTML = '';
  for (let i = 0; i < nums.length; i += 4) {
    const slice = nums.slice(i, i+4);
    slice.forEach(n => {
      const c = document.createElement('div');
      c.className = 'cell';
      c.textContent = n;
      wrap.appendChild(c);
    });
    // fill row if not multiple of 4
    for (let k = slice.length; k < 4; k++) {
      const c = document.createElement('div');
      c.className = 'cell';
      c.style.opacity = .35;
      c.textContent = '—';
      wrap.appendChild(c);
    }
  }
  if (nums.length === 0) {
    const c = document.createElement('div');
    c.className = 'cell';
    c.style.gridColumn = '1 / -1';
    c.style.opacity = .7;
    c.textContent = 'No inputs';
    wrap.appendChild(c);
  }
}

// Calculate total returns over all inputs for the 9 combinations
function calcPayouts(nums) {
  const totals = Array.from({length:9}, () => 0); // index = row*3 + dozen
  nums.forEach(nStr => {
    const n = Number(nStr);
    if (!Number.isInteger(n) || n < 0 || n > 36) return;
    // zero never wins any of the 9 combos
    // if (n === 0) {
    //     totals[i] -= 2 * STAKE;
    // }

    const rowIdx = rowSets.findIndex(s => s.has(n));
    const dozIdx = dozenSets.findIndex(s => s.has(n));

    // For each of the 9 boxes, only the one matching this (rowIdx, dozIdx)
    // scores DOUBLE_WIN; the two that share row or dozen (but not both)
    // each score SINGLE_WIN; the rest score 0.
    for (let r = 0; r < 3; r++) {
      for (let d = 0; d < 3; d++) {
        const i = r*3 + d;
        if (r === rowIdx && d === dozIdx) {
          totals[i] += DOUBLE_WIN;     // both bets win
        } else if (r === rowIdx || d === dozIdx) {
          totals[i] += SINGLE_WIN;     // only one bet wins
        } else{
          totals[i] -= 2 * STAKE;
        }
      }
    }
  });
  return totals;
}

// Render the 3×3 grid with totals (dollars)
function renderPayoutGrid(totals) {
  const wrap = document.getElementById('payoutGrid');
  wrap.innerHTML = '';
  for (let i = 0; i < 9; i++) {
    const r = Math.floor(i / 3) + 1;
    const d = (i % 3) + 1;
    const box = document.createElement('div');
    box.className = 'box' + (totals[i] > 0 ? ' win' : '');
    box.title = `Row ${r} × Dozen ${d}`;
    box.textContent = `$${totals[i]}`;
    wrap.appendChild(box);
  }
}

// Hook up the Calculate button
document.getElementById('calcBtn').addEventListener('click', () => {
  const nums = getList();        // uses your existing parser for textarea
  renderInputGrid(nums);
  const totals = calcPayouts(nums);
  renderPayoutGrid(totals);
});



</script>
</body>
</html>
